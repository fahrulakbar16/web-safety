import{d as p,x as F,y as w,u as J,e as d,o as l,b as g,a as e,g as o,z as K,f as c,c as Q,m as C,v as P,n as f,h as M,t as m,F as I,i as X,l as E,w as Z,A as ee}from"./app-Fb0LGyY_.js";import{_ as te,u as re}from"./AppLayout-D0XbQ-km.js";import{P as ae,T as se,_ as oe}from"./ConfirmModal-C6RkZeQO.js";import{S as le,U as N,D as L,_ as de}from"./Pagination-B1qWbbua.js";import{E as ne}from"./EditIcon-D9Qdkj8G.js";import{_ as ie}from"./Breadcrumb-CJPocqqf.js";import{_ as ce}from"./Modal-MUXdNYyx.js";import"./FlashMessage-CgKw3-1-.js";import"./useColors-BxdDnFDF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ue={class:"flex flex-col gap-3 px-3 h-full"},ge={class:"flex justify-between items-center h-10"},me={class:"h-[90%] grid-cols-12 gap-4 md:gap-6 overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03]"},ye={class:"flex flex-col gap-2 px-8 py-1 sm:flex-row sm:items-center sm:justify-between"},xe={class:"flex gap-3 items-center"},pe={class:"relative py-2"},fe={class:"absolute left-4 top-1/2 -translate-y-1/2"},be={class:"px-8 border-b border-gray-200 dark:border-gray-600"},ke={class:"flex gap-4 -mb-px"},ve={key:0,class:"px-2 py-0.5 ml-2 text-xs text-primary bg-primary/10 rounded-full"},he={key:0,class:"px-2 py-0.5 ml-2 text-xs text-green-600 bg-green-100 rounded-full dark:bg-green-900 dark:text-green-300"},we={key:0,class:"px-2 py-0.5 ml-2 text-xs text-red-600 bg-red-100 rounded-full dark:bg-red-900 dark:text-red-300"},_e={class:"overflow-auto","data-simplebar":""},Ce={class:"min-w-full text-sm"},De={class:"flex gap-2 justify-center items-center px-3"},Se={class:"flex flex-col items-center"},je={class:"flex gap-2 justify-center items-center px-3"},Be={class:"flex flex-col items-center"},Pe={key:0,class:"py-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},Me={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Te={class:"flex justify-center items-center whitespace-nowrap"},$e={class:"px-3 text-gray-500 dark:text-gray-400"},Ae={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Ue={class:"flex gap-3 items-center whitespace-nowrap ps-5"},Fe={class:"flex flex-col leading-tight"},Ie={class:"font-medium text-gray-800 dark:text-white/90"},Ee={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Ne={class:"flex justify-center items-center px-3"},Le=["title"],Ve={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Oe={class:"flex justify-center items-center px-3"},qe=["src","alt"],ze={key:1,class:"text-gray-400 text-xs"},Ge={class:"py-2.5 border border-gray-200 dark:border-gray-600"},He={class:"flex justify-center items-center px-3 whitespace-nowrap"},Re={class:"py-2.5 border border-gray-200 dark:border-gray-600"},We={class:"flex justify-center items-center px-3 text-gray-500 whitespace-nowrap dark:text-gray-400"},Ye={key:0,class:"py-2.5 border border-gray-200 dark:border-gray-600"},Je={class:"flex gap-3 justify-center px-4 whitespace-nowrap sm:px-0"},Ke=["onClick"],Qe=["onClick"],Xe={key:1},Ze=["colspan"],et={class:"space-y-3"},tt={class:"space-y-1 text-sm"},rt={key:0,class:"text-sm text-red-500"},at={class:"space-y-1 text-sm"},st={key:0,class:"text-sm text-red-500"},ot={class:"space-y-1 text-sm"},lt={class:"flex items-center gap-4"},dt={key:0,class:"flex-shrink-0"},nt=["src"],it={key:1,class:"flex-shrink-0 w-32 h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center"},ct={class:"flex-1"},ut={key:0,class:"text-sm text-red-500"},gt={class:"space-y-1 text-sm"},mt={key:0,class:"text-sm text-red-500"},Ct=Object.assign({layout:te},{__name:"Index",props:{companies:Object,search:String,status:String,statusCounts:Object,sortBy:String,sortDirection:String},setup(n){const y=n,{can:i}=re(),V=[{label:"Menu Utama"},{label:"Perusahaan"}],u=p(y.status||"all"),O=r=>r?new Intl.DateTimeFormat("id-ID",{day:"2-digit",month:"short",year:"numeric"}).format(new Date(r)):"-",D=r=>y.statusCounts&&y.statusCounts[r]||0;function T({sortBy:r=y.sortBy,sortDirection:t=y.sortDirection}={}){w.get(route("companies.index"),{search:v.value,status:u.value,sortBy:r,sortDirection:t},{preserveScroll:!0,preserveState:!0,replace:!0})}const v=p(y.search||"");let $=null;F(v,()=>{clearTimeout($),$=setTimeout(()=>{T()},400)}),F(u,()=>{new URL(window.location.href).searchParams.delete("page"),w.get(route("companies.index"),{search:v.value,status:u.value,sortBy:y.sortBy,sortDirection:y.sortDirection},{preserveScroll:!0,preserveState:!0,replace:!0})});function A(r){let t="asc";y.sortBy===r&&y.sortDirection==="asc"&&(t="desc"),T({sortBy:r,sortDirection:t})}const _=p(!1),h=p(!1),b=p(null),k=p(null),s=J({id:null,name:"",alamat:"",logo:null,status:"active"}),q=r=>{const t=r.target.files[0];if(t){k.value=t;const a=new FileReader;a.onload=B=>{b.value=B.target.result},a.readAsDataURL(t)}};function z(){i("companies.create")&&(s.reset(),b.value=null,k.value=null,h.value=!1,_.value=!0)}function G(r){i("companies.edit")&&(s.id=r.id,s.name=r.name,s.alamat=r.alamat||"",s.status=r.status||"active",b.value=null,k.value=null,x.value=r,h.value=!0,_.value=!0)}function S(){_.value=!1,x.value=null,b.value=null,k.value=null,s.reset(),s.clearErrors()}function H(){const r=new FormData;if(r.append("name",s.name),r.append("alamat",s.alamat||""),r.append("status",s.status),k.value&&r.append("logo",k.value),h.value){if(!i("companies.edit"))return;r.append("_method","PUT"),w.post(route("companies.update",s.id),r,{onSuccess:S,forceFormData:!0})}else{if(!i("companies.create"))return;w.post(route("companies.store"),r,{onSuccess:S,forceFormData:!0})}}const x=p(null),j=p(!1),R=r=>{i("companies.delete")&&(x.value=r,j.value=!0)},U=()=>{x.value=null,j.value=!1},W=()=>{i("companies.delete")&&w.delete(route("companies.destroy",x.value.id),{onSuccess:()=>{U()},preserveScroll:!0})};return(r,t)=>(l(),d(I,null,[g(o(K),{title:"Daftar Perusahaan"}),e("div",ue,[e("div",ge,[g(ie,{items:V}),o(i)("companies.create")?(l(),d("button",{key:0,onClick:z,type:"button",class:"flex gap-2 items-center px-3 py-2 text-white rounded btn-primary"},[g(ae),t[9]||(t[9]=e("span",{class:"hidden text-sm md:block"},"Tambah Perusahaan",-1))])):c("",!0)]),e("div",me,[e("div",ye,[t[10]||(t[10]=e("div",{class:"font-bold text-gray-700 md:text-xl dark:text-gray-300"}," Daftar Perusahaan ",-1)),e("div",xe,[e("div",pe,[e("div",fe,[g(le,{class:"text-gray-400"})]),C(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>v.value=a),type:"text",placeholder:"Cari perusahaan",class:"h-10 w-full rounded-lg border border-gray-200 bg-transparent py-2.5 pl-12 pr-4 text-sm text-gray-800 placeholder:text-gray-400 focus:border-blue-300 focus:outline-hidden focus:ring-3 focus:ring-blue-500/10 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90 dark:placeholder:text-gray-400 dark:focus:border-blue-800 xl:w-[200px]"},null,512),[[P,v.value]])])])]),e("div",be,[e("nav",ke,[e("button",{onClick:t[1]||(t[1]=a=>u.value="all"),class:f(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",u.value==="all"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[t[11]||(t[11]=M(" Semua ",-1)),u.value==="all"?(l(),d("span",ve,m(D("all")),1)):c("",!0)],2),e("button",{onClick:t[2]||(t[2]=a=>u.value="active"),class:f(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",u.value==="active"?"border-green-500 text-green-600 dark:text-green-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[t[12]||(t[12]=M(" Aktif ",-1)),u.value==="active"?(l(),d("span",he,m(D("active")),1)):c("",!0)],2),e("button",{onClick:t[3]||(t[3]=a=>u.value="inactive"),class:f(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",u.value==="inactive"?"border-red-500 text-red-600 dark:text-red-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[t[13]||(t[13]=M(" Tidak Aktif ",-1)),u.value==="inactive"?(l(),d("span",we,m(D("inactive")),1)):c("",!0)],2)])]),e("div",_e,[e("table",Ce,[e("thead",null,[e("tr",null,[t[17]||(t[17]=e("th",{class:"py-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"flex flex-col items-center font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," No. ")])],-1)),e("th",{onClick:t[4]||(t[4]=a=>A("name")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",De,[t[14]||(t[14]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Nama Perusahaan ",-1)),e("div",Se,[g(N,{class:f(["-mb-1",n.sortBy==="name"&&n.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),g(L,{class:f(["-mt-1",n.sortBy==="name"&&n.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),t[18]||(t[18]=e("th",{class:"py-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Alamat ")])],-1)),t[19]||(t[19]=e("th",{class:"py-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Logo ")])],-1)),t[20]||(t[20]=e("th",{class:"py-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Status ")])],-1)),e("th",{onClick:t[5]||(t[5]=a=>A("created_at")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",je,[t[15]||(t[15]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Dibuat ",-1)),e("div",Be,[g(N,{class:f(["-mb-1",n.sortBy==="created_at"&&n.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),g(L,{class:f(["-mt-1",n.sortBy==="created_at"&&n.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),o(i)("companies.edit")||o(i)("companies.delete")?(l(),d("th",Pe,[...t[16]||(t[16]=[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Aksi ")],-1)])])):c("",!0)])]),e("tbody",null,[n.companies.data&&n.companies.data.length>0?(l(!0),d(I,{key:0},X(n.companies.data,(a,B)=>(l(),d("tr",{key:a.id,class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800"},[e("td",Me,[e("div",Te,[e("p",$e,m((n.companies.current_page-1)*n.companies.per_page+B+1)+". ",1)])]),e("td",Ae,[e("div",Ue,[e("div",Fe,[e("p",Ie,m(a.name),1)])])]),e("td",Ee,[e("div",Ne,[e("p",{class:"text-gray-500 dark:text-gray-400 line-clamp-2",title:a.alamat||"-"},m(a.alamat||"-"),9,Le)])]),e("td",Ve,[e("div",Oe,[a.logo?(l(),d("img",{key:0,src:a.logo,alt:a.name,class:"object-cover w-12 h-12 rounded",loading:"lazy"},null,8,qe)):(l(),d("span",ze," - "))])]),e("td",Ge,[e("div",He,[e("span",{class:f(["px-3 py-1 rounded-full text-xs font-medium",a.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"])},m(a.status==="active"?"Aktif":"Tidak Aktif"),3)])]),e("td",Re,[e("div",We,[e("span",null,m(O(a.created_at)),1)])]),o(i)("companies.edit")||o(i)("companies.delete")?(l(),d("td",Ye,[e("div",Je,[o(i)("companies.edit")?(l(),d("button",{key:0,onClick:E(Y=>G(a),["stop"]),class:"text-yellow-500 hover:text-yellow-600",title:"Edit"},[g(ne)],8,Ke)):c("",!0),o(i)("companies.delete")?(l(),d("button",{key:1,onClick:E(Y=>R(a),["stop"]),class:"text-red-500 hover:text-red-600",title:"Hapus"},[g(se)],8,Qe)):c("",!0)])])):c("",!0)]))),128)):(l(),d("tr",Xe,[e("td",{colspan:o(i)("companies.edit")||o(i)("companies.delete")?7:6,class:"py-6 font-medium text-center text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-gray-600"}," Tidak ada perusahaan ditemukan ",8,Ze)]))])]),g(ce,{show:_.value,title:h.value?`Edit ${x.value?.name}`:"Tambah Perusahaan Baru",confirmText:"Simpan",maxWidth:"lg",onClose:S,onConfirm:H},{default:Z(()=>[e("div",et,[e("div",tt,[t[21]||(t[21]=e("label",{for:"name",class:"text-gray-900 dark:text-white"},"Nama Perusahaan",-1)),C(e("input",{id:"name",class:"w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-400 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",type:"text","onUpdate:modelValue":t[6]||(t[6]=a=>o(s).name=a),required:"",placeholder:"Masukkan nama perusahaan"},null,512),[[P,o(s).name]]),o(s).errors.name?(l(),d("div",rt,m(o(s).errors.name),1)):c("",!0)]),e("div",at,[t[22]||(t[22]=e("label",{for:"alamat",class:"text-gray-900 dark:text-white"},"Alamat",-1)),C(e("textarea",{id:"alamat","onUpdate:modelValue":t[7]||(t[7]=a=>o(s).alamat=a),class:"w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-400 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",rows:"3",placeholder:"Masukkan alamat perusahaan"},null,512),[[P,o(s).alamat]]),o(s).errors.alamat?(l(),d("div",st,m(o(s).errors.alamat),1)):c("",!0)]),e("div",ot,[t[25]||(t[25]=e("label",{for:"logo",class:"text-gray-900 dark:text-white"},"Logo",-1)),e("div",lt,[b.value||h.value&&x.value?.logo?(l(),d("div",dt,[e("img",{src:b.value||x.value?.logo,alt:"Logo Preview",class:"w-32 h-32 object-contain border border-gray-200 rounded-lg"},null,8,nt)])):(l(),d("div",it,[...t[23]||(t[23]=[e("span",{class:"text-gray-400 text-sm"},"No Logo",-1)])])),e("div",ct,[e("input",{type:"file",accept:"image/*",onChange:q,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),t[24]||(t[24]=e("p",{class:"mt-1 text-xs text-gray-500"}," Format: JPG, PNG, GIF, WEBP. Maksimal 2MB ",-1))])]),o(s).errors.logo?(l(),d("div",ut,m(o(s).errors.logo),1)):c("",!0)]),e("div",gt,[t[27]||(t[27]=e("label",{for:"status",class:"text-gray-900 dark:text-white"},"Status",-1)),C(e("select",{id:"status","onUpdate:modelValue":t[8]||(t[8]=a=>o(s).status=a),class:"block p-2.5 w-full text-sm text-gray-600 rounded-lg border-gray-400 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[...t[26]||(t[26]=[e("option",{value:"active"},"Aktif",-1),e("option",{value:"inactive"},"Tidak Aktif",-1)])],512),[[ee,o(s).status]]),o(s).errors.status?(l(),d("div",mt,m(o(s).errors.status),1)):c("",!0)])])]),_:1},8,["show","title"]),g(oe,{show:j.value,question:"Yakin ingin menghapus",selected:`${x.value?.name}`,title:"Hapus Perusahaan",confirmText:"Ya, Hapus!",maxWidth:"md",onClose:U,onConfirm:W},null,8,["show","selected"])]),n.companies.data&&n.companies.data.length>0?(l(),Q(de,{key:0,pagination:n.companies},null,8,["pagination"])):c("",!0)])])],64))}});export{Ct as default};
