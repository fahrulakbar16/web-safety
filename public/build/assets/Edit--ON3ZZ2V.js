import{d as C,u as S,a0 as V,j as F,e as n,o as u,b as _,a as t,g,z as O,h as m,t as b,F as k,i as v,m as A,q as B}from"./app-Fb0LGyY_.js";import{_ as P,u as D}from"./AppLayout-D0XbQ-km.js";import{_ as G}from"./Breadcrumb-CJPocqqf.js";import"./FlashMessage-CgKw3-1-.js";import"./useColors-BxdDnFDF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"flex flex-col h-full gap-3 px-3 overflow-hidden"},M={class:"flex items-center justify-between h-10"},N={class:"flex flex-col overflow-hidden rounded border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03]"},U={class:"flex items-center justify-between gap-2 px-8 py-5 font-semibold text-gray-700 border-b md:text-xl dark:text-gray-300"},$={class:"text-sky-500"},q={class:"overflow-auto","data-simplebar":""},z={class:"grid grid-cols-1 gap-6 p-8 md:grid-cols-4"},H={class:"flex items-center justify-between text-lg font-bold dark:text-gray-100"},J={class:"cursor-pointer"},L=["checked","disabled","onChange"],T={class:"grid gap-"},Q={class:"cursor-pointer"},R=["onUpdate:modelValue","checked","disabled","onChange"],W={class:"dark:text-gray-200"},te=Object.assign({layout:P},{__name:"Edit",props:{role:Object,permissions:Object},setup(y){const{can:f}=D(),d=y,x=[{label:"Konfigurasi"},{label:"Jabatan",href:route("roles.index")},{label:d.role.name}],o=C(d.role.permissions.map(r=>r.id)),p=r=>o.value.includes(r),c=S({permission_ids:[],checked:!1}),w=(r,e)=>{f("roles.edit")&&(c.permission_ids=[r],c.checked=e,c.patch(route("roles.update",d.role.id),{preserveScroll:!0,onSuccess:()=>{e?o.value.includes(r)||o.value.push(r):o.value=o.value.filter(a=>a!==r),i[r]=e}}))},j=(r,e)=>{if(!f("roles.edit"))return;const a=r.map(s=>s.id);c.permission_ids=a,c.checked=e,c.patch(route("roles.update",d.role.id),{preserveScroll:!0,onSuccess:()=>{e?a.forEach(s=>{o.value.includes(s)||o.value.push(s)}):o.value=o.value.filter(s=>!a.includes(s)),a.forEach(s=>i[s]=e)}})},E=r=>r.every(e=>p(e.id)),i=V({});return F(()=>{Object.values(d.permissions).forEach(r=>{r.forEach(e=>{i[e.id]=p(e.id)})})}),(r,e)=>(u(),n(k,null,[_(g(O),{title:"Edit Akses Pengguna"}),t("div",K,[t("div",M,[_(G,{items:x})]),t("div",N,[t("div",U,[e[0]||(e[0]=m(" Kelola Hak Akses ",-1)),t("span",$,b(y.role.name),1)]),t("div",q,[t("div",z,[(u(!0),n(k,null,v(d.permissions,(a,s)=>(u(),n("div",{key:s,class:"p-4 space-y-2 border rounded-lg"},[t("h5",H,[m(b(s)+" ",1),t("label",J,[t("input",{type:"checkbox",checked:E(a),disabled:!g(f)("roles.edit"),onChange:l=>j(a,l.target.checked),class:"sr-only peer"},null,40,L),e[1]||(e[1]=t("div",{class:"relative w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-sky-300 dark:peer-focus:ring-sky-500 dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-sky-500 dark:peer-checked:bg-sky-600"},null,-1))])]),t("div",T,[(u(!0),n(k,null,v(a,l=>(u(),n("div",{key:l.id,class:"flex items-center gap-3 p-2"},[t("label",Q,[A(t("input",{type:"checkbox","onUpdate:modelValue":h=>i[l.id]=h,checked:p(l.id),disabled:!g(f)("roles.edit"),onChange:h=>w(l.id,h.target.checked),class:"sr-only peer"},null,40,R),[[B,i[l.id]]]),e[2]||(e[2]=t("div",{class:"relative w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-sky-300 dark:peer-focus:ring-sky-500 dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-sky-500 dark:peer-checked:bg-sky-600"},null,-1))]),t("span",W,b(l.display_name),1)]))),128))])]))),128))])])])])],64))}});export{te as default};
