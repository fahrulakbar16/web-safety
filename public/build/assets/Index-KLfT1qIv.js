import{d as b,x as P,y as V,u as K,e as n,o,b as u,a as e,g as s,z as Q,f as y,c as X,m as f,A,F as D,i as I,t as i,v as S,n as m,h as j,l as F,w as Z}from"./app-Fb0LGyY_.js";import{_ as ee,u as te}from"./AppLayout-D0XbQ-km.js";import{P as re,T as ae,_ as se}from"./ConfirmModal-C6RkZeQO.js";import{S as oe,U as M,D as B,_ as le}from"./Pagination-B1qWbbua.js";import{E as ne}from"./EditIcon-D9Qdkj8G.js";import{_ as de}from"./Breadcrumb-CJPocqqf.js";import{_ as ie}from"./Modal-MUXdNYyx.js";import"./FlashMessage-CgKw3-1-.js";import"./useColors-BxdDnFDF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ue={class:"flex flex-col gap-3 px-3 h-full"},ge={class:"flex justify-between items-center h-10"},ce={class:"h-[90%] grid-cols-12 gap-4 md:gap-6 overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03]"},ye={class:"flex flex-col gap-2 px-8 py-1 sm:flex-row sm:items-center sm:justify-between"},xe={class:"flex gap-3 items-center"},me=["value"],pe={class:"relative py-2"},be={class:"absolute left-4 top-1/2 -translate-y-1/2"},fe={class:"px-8 border-b border-gray-200 dark:border-gray-600"},ke={class:"flex gap-4 -mb-px"},ve={key:0,class:"px-2 py-0.5 ml-2 text-xs text-primary bg-primary/10 rounded-full"},he={key:0,class:"px-2 py-0.5 ml-2 text-xs text-green-600 bg-green-100 rounded-full dark:bg-green-900 dark:text-green-300"},we={key:0,class:"px-2 py-0.5 ml-2 text-xs text-yellow-600 bg-yellow-100 rounded-full dark:bg-yellow-900 dark:text-yellow-300"},_e={key:0,class:"px-2 py-0.5 ml-2 text-xs text-red-600 bg-red-100 rounded-full dark:bg-red-900 dark:text-red-300"},Ce={class:"overflow-auto","data-simplebar":""},De={class:"min-w-full text-sm"},Se={class:"flex gap-2 justify-center items-center px-3"},je={class:"flex flex-col items-center"},Me={class:"flex gap-2 justify-center items-center px-3"},Be={class:"flex flex-col items-center"},$e={class:"flex gap-2 justify-center items-center px-3"},Te={class:"flex flex-col items-center"},Ue={class:"flex gap-2 justify-center items-center px-3"},Pe={class:"flex flex-col items-center"},Ve={key:0,class:"py-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},Ae={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Ie={class:"flex justify-center items-center whitespace-nowrap"},Ee={class:"px-3 text-gray-500 dark:text-gray-400"},Ne={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Oe={class:"flex gap-3 items-center whitespace-nowrap ps-5"},Fe=["src"],qe={class:"flex flex-col leading-tight"},ze={class:"font-medium text-gray-800 dark:text-white/90"},He={class:"text-gray-500 dark:text-gray-400"},Le={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Re={class:"flex justify-center items-center px-3 whitespace-nowrap"},We={class:"text-gray-500 dark:text-gray-400"},Ye={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Ge={class:"flex justify-center items-center px-3 whitespace-nowrap"},Je={class:"text-gray-500 dark:text-gray-400"},Ke={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Qe={class:"flex justify-center items-center px-3 whitespace-nowrap"},Xe={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Ze={class:"flex justify-center items-center px-3 text-gray-500 whitespace-nowrap dark:text-gray-400"},et={key:0,class:"px-3 py-1 text-teal-500 bg-teal-200 rounded-full dark:bg-teal-400 dark:text-teal-100"},tt={key:1},rt={key:2,class:"text-gray-400"},at={key:0,class:"py-2.5 border border-gray-200 dark:border-gray-600"},st={class:"flex gap-3 justify-center px-4 whitespace-nowrap sm:px-0"},ot=["onClick"],lt=["onClick"],nt={key:1},dt=["colspan"],it={class:"space-y-3"},ut={class:"space-y-1 text-sm"},gt={key:0,class:"text-sm text-red-500"},ct={class:"space-y-1 text-sm"},yt={key:0,class:"text-sm text-red-500"},xt={class:"space-y-1 text-sm"},mt={key:0,class:"text-sm text-red-500"},pt={class:"space-y-1 text-sm"},bt=["value"],ft={key:0,class:"text-sm text-red-500"},kt={class:"space-y-1 text-sm"},vt={key:0,class:"text-sm text-red-500"},Tt=Object.assign({layout:ee},{__name:"Index",props:{users:Object,roles:Object,search:String,role:String,status:String,statusCounts:Object,sortBy:String,sortDirection:String},setup(l){const x=l,{can:g}=te(),q=[{label:"Menu Utama"},{label:"Pengguna"}],c=b(x.status||"all"),z=d=>d?new Intl.DateTimeFormat("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(d)):"-",H=d=>{if(!d)return!1;const t=new Date,r=new Date(d);return(t-r)/(1e3*60)<2},h=d=>x.statusCounts&&x.statusCounts[d]||0;function $({sortBy:d=x.sortBy,sortDirection:t=x.sortDirection}={}){V.get(route("users.index"),{search:k.value,role:v.value,status:c.value,sortBy:d,sortDirection:t},{preserveScroll:!0,preserveState:!0,replace:!0})}const k=b(x.search||""),v=b(x.role||"");let E=null;P(k,()=>{clearTimeout(E),E=setTimeout(()=>{$()},400)}),P(v,()=>{$()}),P(c,()=>{new URL(window.location.href).searchParams.delete("page"),V.get(route("users.index"),{search:k.value,role:v.value,status:c.value,sortBy:x.sortBy,sortDirection:x.sortDirection},{preserveScroll:!0,preserveState:!0,replace:!0})});function w(d){let t="asc";x.sortBy===d&&x.sortDirection==="asc"&&(t="desc"),$({sortBy:d,sortDirection:t})}const _=b(!1),C=b(!1),a=K({id:null,name:"",username:"",email:"",role:"",status:"active"});function L(){g("users.create")&&(a.reset(),C.value=!1,_.value=!0)}function R(d){g("users.edit")&&(a.id=d.id,a.name=d.name,a.username=d.username,a.email=d.email,a.role=d.roles[0].name,a.status=d.status||"active",p.value=d,C.value=!0,_.value=!0)}function T(){_.value=!1,p.value=null,a.reset(),a.clearErrors()}function W(){if(C.value){if(!g("users.edit"))return;a.put(route("users.update",a.id),{onSuccess:T})}else{if(!g("users.create"))return;a.post(route("users.store"),{onSuccess:T})}}const p=b(null),U=b(!1),Y=d=>{g("users.delete")&&(p.value=d,U.value=!0)},N=()=>{p.value=null,U.value=!1},G=()=>{g("users.delete")&&V.delete(route("users.destroy",p.value.id),{onSuccess:()=>{N()},preserveScroll:!0})};return(d,t)=>(o(),n(D,null,[u(s(Q),{title:"Daftar Pengguna"}),e("div",ue,[e("div",ge,[u(de,{items:q}),s(g)("users.create")?(o(),n("button",{key:0,onClick:L,type:"button",class:"flex gap-2 items-center px-3 py-2 text-white rounded btn-primary"},[u(re),t[15]||(t[15]=e("span",{class:"hidden text-sm md:block"},"Tambah Pengguna",-1))])):y("",!0)]),e("div",ce,[e("div",ye,[t[17]||(t[17]=e("div",{class:"font-bold text-gray-700 md:text-xl dark:text-gray-300"}," Daftar Pengguna ",-1)),e("div",xe,[f(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>v.value=r),class:"px-3 h-10 text-sm text-gray-800 bg-transparent rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90 focus:border-blue-300 focus:outline-hidden focus:ring-2 focus:ring-blue-500/20"},[t[16]||(t[16]=e("option",{value:""},"Semua Peran",-1)),(o(!0),n(D,null,I(x.roles,r=>(o(),n("option",{key:r.id,value:r.name},i(r.name),9,me))),128))],512),[[A,v.value]]),e("div",pe,[e("div",be,[u(oe,{class:"text-gray-400"})]),f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>k.value=r),type:"text",placeholder:"Cari pengguna",class:"h-10 w-full rounded-lg border border-gray-200 bg-transparent py-2.5 pl-12 pr-4 text-sm text-gray-800 placeholder:text-gray-400 focus:border-blue-300 focus:outline-hidden focus:ring-3 focus:ring-blue-500/10 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90 dark:placeholder:text-gray-400 dark:focus:border-blue-800 xl:w-[200px]"},null,512),[[S,k.value]])])])]),e("div",fe,[e("nav",ke,[e("button",{onClick:t[2]||(t[2]=r=>c.value="all"),class:m(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",c.value==="all"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[t[18]||(t[18]=j(" Semua ",-1)),c.value==="all"?(o(),n("span",ve,i(h("all")),1)):y("",!0)],2),e("button",{onClick:t[3]||(t[3]=r=>c.value="active"),class:m(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",c.value==="active"?"border-green-500 text-green-600 dark:text-green-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[t[19]||(t[19]=j(" Aktif ",-1)),c.value==="active"?(o(),n("span",he,i(h("active")),1)):y("",!0)],2),e("button",{onClick:t[4]||(t[4]=r=>c.value="pending"),class:m(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",c.value==="pending"?"border-yellow-500 text-yellow-600 dark:text-yellow-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[t[20]||(t[20]=j(" Menunggu Verifikasi ",-1)),c.value==="pending"?(o(),n("span",we,i(h("pending")),1)):y("",!0)],2),e("button",{onClick:t[5]||(t[5]=r=>c.value="inactive"),class:m(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",c.value==="inactive"?"border-red-500 text-red-600 dark:text-red-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[t[21]||(t[21]=j(" Tidak Aktif ",-1)),c.value==="inactive"?(o(),n("span",_e,i(h("inactive")),1)):y("",!0)],2)])]),e("div",Ce,[e("table",De,[e("thead",null,[e("tr",null,[t[27]||(t[27]=e("th",{class:"py-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"flex flex-col items-center font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," No. ")])],-1)),e("th",{onClick:t[6]||(t[6]=r=>w("name")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",Se,[t[22]||(t[22]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Nama & Email Pengguna ",-1)),e("div",je,[u(M,{class:m(["-mb-1",l.sortBy==="name"&&l.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),u(B,{class:m(["-mt-1",l.sortBy==="name"&&l.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),e("th",{onClick:t[7]||(t[7]=r=>w("username")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",Me,[t[23]||(t[23]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Username ",-1)),e("div",Be,[u(M,{class:m(["-mb-1",l.sortBy==="username"&&l.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),u(B,{class:m(["-mt-1",l.sortBy==="username"&&l.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),e("th",{onClick:t[8]||(t[8]=r=>w("role")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",$e,[t[24]||(t[24]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Peran & Akses ",-1)),e("div",Te,[u(M,{class:m(["-mb-1",l.sortBy==="role"&&l.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),u(B,{class:m(["-mt-1",l.sortBy==="role"&&l.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),t[28]||(t[28]=e("th",{class:"py-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Status ")])],-1)),e("th",{onClick:t[9]||(t[9]=r=>w("updated_at")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",Ue,[t[25]||(t[25]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Terakhir Dilihat ",-1)),e("div",Pe,[u(M,{class:m(["-mb-1",l.sortBy==="updated_at"&&l.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),u(B,{class:m(["-mt-1",l.sortBy==="updated_at"&&l.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),s(g)("users.edit")||s(g)("users.delete")?(o(),n("th",Ve,[...t[26]||(t[26]=[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Aksi ")],-1)])])):y("",!0)])]),e("tbody",null,[l.users.data&&l.users.data.length>0?(o(!0),n(D,{key:0},I(l.users.data,(r,O)=>(o(),n("tr",{key:r.id,class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800"},[e("td",Ae,[e("div",Ie,[e("p",Ee,i((l.users.current_page-1)*l.users.per_page+O+1)+". ",1)])]),e("td",Ne,[e("div",Oe,[e("img",{class:"object-cover w-10 h-10 rounded-full",src:r.profile_photo_path?`/storage/${r.profile_photo_path}`:`https://ui-avatars.com/api/?name=${encodeURIComponent(r.name)}&background=3b82f6&color=fff`,alt:"User profile",loading:"lazy"},null,8,Fe),e("div",qe,[e("p",ze,i(r.name),1),e("span",He,i(r.email),1)])])]),e("td",Le,[e("div",Re,[e("p",We,i(r.username),1)])]),e("td",Ye,[e("div",Ge,[e("p",Je,i(r.roles[0]?.name||"-"),1)])]),e("td",Ke,[e("div",Qe,[e("span",{class:m(["px-3 py-1 rounded-full text-xs font-medium",r.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":r.status==="pending"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"])},i(r.status==="active"?"Aktif":r.status==="pending"?"Menunggu Verifikasi":"Tidak Aktif"),3)])]),e("td",Xe,[e("div",Ze,[r.last_seen&&H(r.last_seen)?(o(),n("span",et," Online ")):r.last_seen?(o(),n("span",tt,i(z(r.last_seen)),1)):(o(),n("span",rt," Tidak pernah terlihat "))])]),s(g)("users.edit")||s(g)("users.delete")?(o(),n("td",at,[e("div",st,[s(g)("users.edit")?(o(),n("button",{key:0,onClick:F(J=>R(r),["stop"]),class:"text-yellow-500 hover:text-yellow-600",title:"Edit"},[u(ne)],8,ot)):y("",!0),s(g)("users.delete")?(o(),n("button",{key:1,onClick:F(J=>Y(r),["stop"]),class:"text-red-500 hover:text-red-600",title:"Hapus"},[u(ae)],8,lt)):y("",!0)])])):y("",!0)]))),128)):(o(),n("tr",nt,[e("td",{colspan:s(g)("users.edit")||s(g)("users.delete")?7:6,class:"py-6 font-medium text-center text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-gray-600"}," Tidak ada pengguna ditemukan ",8,dt)]))])]),u(ie,{show:_.value,title:C.value?`Edit ${p.value?.name}`:"Tambah Pengguna Baru",confirmText:"Simpan",maxWidth:"lg",onClose:T,onConfirm:W},{default:Z(()=>[e("div",it,[e("div",ut,[t[29]||(t[29]=e("label",{for:"name",class:"text-gray-900 dark:text-white"},"Nama Lengkap",-1)),f(e("input",{id:"name",class:"w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-400 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",type:"text","onUpdate:modelValue":t[10]||(t[10]=r=>s(a).name=r),required:"",placeholder:"Masukkan nama lengkap pengguna"},null,512),[[S,s(a).name]]),s(a).errors.name?(o(),n("div",gt,i(s(a).errors.name),1)):y("",!0)]),e("div",ct,[t[30]||(t[30]=e("label",{for:"username",class:"text-gray-900 dark:text-white"},"Nama Pengguna",-1)),f(e("input",{id:"username",class:"w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-400 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",type:"text","onUpdate:modelValue":t[11]||(t[11]=r=>s(a).username=r),required:"",placeholder:"Masukkan username"},null,512),[[S,s(a).username]]),s(a).errors.username?(o(),n("div",yt,i(s(a).errors.username),1)):y("",!0)]),e("div",xt,[t[31]||(t[31]=e("label",{for:"email",class:"text-gray-900 dark:text-white"},"Email",-1)),f(e("input",{id:"email","onUpdate:modelValue":t[12]||(t[12]=r=>s(a).email=r),class:"w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-400 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",type:"email",placeholder:"Masukkan email pengguna"},null,512),[[S,s(a).email]]),s(a).errors.email?(o(),n("div",mt,i(s(a).errors.email),1)):y("",!0)]),e("div",pt,[t[33]||(t[33]=e("label",{for:"role",class:"text-gray-900 dark:text-white"},"Peran",-1)),f(e("select",{id:"role","onUpdate:modelValue":t[13]||(t[13]=r=>s(a).role=r),class:"block p-2.5 w-full text-sm text-gray-600 rounded-lg border-gray-400 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[t[32]||(t[32]=e("option",{selected:"",hidden:"",value:""}," Pilih peran pengguna ",-1)),(o(!0),n(D,null,I(x.roles,r=>(o(),n("option",{key:r.name,value:r.name},i(r.name),9,bt))),128))],512),[[A,s(a).role]]),s(a).errors.role?(o(),n("div",ft,i(s(a).errors.role),1)):y("",!0)]),e("div",kt,[t[35]||(t[35]=e("label",{for:"status",class:"text-gray-900 dark:text-white"},"Status",-1)),f(e("select",{id:"status","onUpdate:modelValue":t[14]||(t[14]=r=>s(a).status=r),class:"block p-2.5 w-full text-sm text-gray-600 rounded-lg border-gray-400 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[...t[34]||(t[34]=[e("option",{value:"active"},"Aktif",-1),e("option",{value:"pending"}," Menunggu Verifikasi ",-1),e("option",{value:"inactive"},"Tidak Aktif",-1)])],512),[[A,s(a).status]]),s(a).errors.status?(o(),n("div",vt,i(s(a).errors.status),1)):y("",!0)])])]),_:1},8,["show","title"]),u(se,{show:U.value,question:"Yakin ingin menghapus",selected:`${p.value?.name}`,title:"Hapus Pengguna",confirmText:"Ya, Hapus!",maxWidth:"md",onClose:N,onConfirm:G},null,8,["show","selected"])]),l.users.data&&l.users.data.length>0?(o(),X(le,{key:0,pagination:l.users},null,8,["pagination"])):y("",!0)])])],64))}});export{Tt as default};
