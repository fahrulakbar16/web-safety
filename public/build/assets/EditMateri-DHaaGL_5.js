import{d as b,u as V,j as F,e as s,o as l,b as y,a as r,g as a,z as U,t as c,l as j,f as d,m as x,h as u,v,A as E,w as S,I as T,F as B}from"./app-Fb0LGyY_.js";import{_ as C}from"./AppLayout-D0XbQ-km.js";import{_ as N}from"./Breadcrumb-CJPocqqf.js";import{s as P}from"./quill.snow-nIBTaXsV.js";import"./FlashMessage-CgKw3-1-.js";import"./useColors-BxdDnFDF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"flex flex-col gap-3 px-3 h-full"},I={class:"flex justify-between items-center h-10"},O={class:"flex flex-col gap-6 p-6 overflow-auto rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03]"},$={class:"text-2xl font-bold text-gray-900 dark:text-white"},q={class:"space-y-1 text-sm"},A={key:0,class:"text-sm text-red-500"},L={class:"space-y-1 text-sm"},R={key:0,class:"text-sm text-red-500"},z={class:"space-y-1 text-sm"},K={key:0,class:"text-sm text-red-500"},W={key:0,class:"space-y-1 text-sm"},G={key:0,class:"text-sm text-red-500"},H={key:1,class:"space-y-1 text-sm"},J={class:"flex flex-col gap-2"},Q={key:0,class:"flex-shrink-0"},X=["src"],Y={key:1,class:"p-4 border border-gray-200 rounded-lg dark:border-gray-600"},Z=["src"],ee={class:"text-sm text-gray-600 dark:text-gray-400 mt-2"},te=["href"],re={key:0,class:"text-sm text-red-500"},ae={class:"flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-600"},se=["disabled"],le={key:0},oe={key:1},pe=Object.assign({layout:C},{__name:"EditMateri",props:{event:Object,materi:Object},setup(n){const o=n,k=[{label:"Menu Utama"},{label:"Event",url:route("events.index")},{label:o.event.name,url:route("events.show",o.event.id)},{label:`Edit Materi: ${o.materi.name}`}],g=b(null),m=b(null),p=b(null),t=V({urutan:o.materi.urutan||1,name:o.materi.name||"",type:o.materi.type||"text",description:o.materi.description||"",file:null});F(()=>{o.materi.file&&o.materi.type});const h=()=>{t.type==="text"?(p.value=null,g.value=null,m.value=null):t.type},w=f=>{const e=f.target.files[0];if(e)if(p.value=e,g.value=e.name,e.type.startsWith("video/")){const i=new FileReader;i.onload=M=>{m.value=M.target.result},i.readAsDataURL(e)}else m.value=null},_=()=>{t.urutan=parseInt(t.urutan)||1,t.type==="video"?(t.file=p.value,p.value||delete t.file):delete t.file,t.transform(f=>({...f,_method:"PUT"})).post(route("events.materis.update",[o.event.id,o.materi.id]),{forceFormData:!0,onSuccess:()=>{}})};return(f,e)=>(l(),s(B,null,[y(a(U),{title:`Edit Materi - ${n.event.name}`},null,8,["title"]),r("div",D,[r("div",I,[y(N,{items:k})]),r("div",O,[r("h1",$," Edit Materi: "+c(n.materi.name),1),r("form",{onSubmit:j(_,["prevent"]),class:"space-y-6"},[r("div",q,[e[4]||(e[4]=r("label",{for:"urutan",class:"text-gray-900 dark:text-white"},[u(" Urutan "),r("span",{class:"text-red-500"},"*")],-1)),x(r("input",{id:"urutan","onUpdate:modelValue":e[0]||(e[0]=i=>a(t).urutan=i),type:"number",min:"1",class:"w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-400 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",placeholder:"Masukkan urutan",required:""},null,512),[[v,a(t).urutan]]),a(t).errors.urutan?(l(),s("div",A,c(a(t).errors.urutan),1)):d("",!0)]),r("div",L,[e[5]||(e[5]=r("label",{for:"name",class:"text-gray-900 dark:text-white"},[u(" Nama Materi "),r("span",{class:"text-red-500"},"*")],-1)),x(r("input",{id:"name","onUpdate:modelValue":e[1]||(e[1]=i=>a(t).name=i),type:"text",class:"w-full text-sm font-medium placeholder-gray-500 text-gray-600 rounded-lg border-gray-400 placeholder:font-normal dark:border-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",placeholder:"Masukkan nama materi",required:""},null,512),[[v,a(t).name]]),a(t).errors.name?(l(),s("div",R,c(a(t).errors.name),1)):d("",!0)]),r("div",z,[e[7]||(e[7]=r("label",{for:"type",class:"text-gray-900 dark:text-white"},[u(" Tipe "),r("span",{class:"text-red-500"},"*")],-1)),x(r("select",{id:"type","onUpdate:modelValue":e[2]||(e[2]=i=>a(t).type=i),onChange:h,class:"block p-2.5 w-full text-sm text-gray-600 rounded-lg border-gray-400 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},[...e[6]||(e[6]=[r("option",{value:"text"},"Text",-1),r("option",{value:"video"},"Video",-1)])],544),[[E,a(t).type]]),a(t).errors.type?(l(),s("div",K,c(a(t).errors.type),1)):d("",!0)]),a(t).type==="text"?(l(),s("div",W,[e[8]||(e[8]=r("label",{for:"description",class:"text-gray-900 dark:text-white"},[u(" Konten Materi "),r("span",{class:"text-red-500"},"*")],-1)),y(a(P),{modelValue:a(t).description,"onUpdate:modelValue":e[3]||(e[3]=i=>a(t).description=i),editorStyle:"min-height: 300px",pt:{root:{class:"w-full"},toolbar:{class:"dark:bg-gray-700 dark:border-gray-600"},content:{class:"dark:bg-gray-700 dark:text-white"}}},null,8,["modelValue"]),a(t).errors.description?(l(),s("div",G,c(a(t).errors.description),1)):d("",!0)])):d("",!0),a(t).type==="video"?(l(),s("div",H,[e[11]||(e[11]=r("label",{for:"file",class:"text-gray-900 dark:text-white"},[u(" File Video "),r("span",{class:"text-red-500"},"*")],-1)),r("div",J,[m.value||n.materi.file?(l(),s("div",Q,[m.value?(l(),s("video",{key:0,src:m.value,controls:"",class:"w-full h-64 object-contain border border-gray-200 rounded-lg dark:border-gray-600"},null,8,X)):n.materi.file?(l(),s("div",Y,[r("video",{src:n.materi.file,controls:"",class:"w-full h-64 object-contain"},null,8,Z),r("p",ee,[e[9]||(e[9]=u(" File saat ini: ",-1)),r("a",{href:n.materi.file,target:"_blank",class:"text-blue-600 hover:text-blue-700 dark:text-blue-400"},"Lihat File",8,te)])])):d("",!0)])):d("",!0),r("input",{id:"file",type:"file",accept:"video/*",onChange:w,class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),e[10]||(e[10]=r("p",{class:"text-xs text-gray-500"}," Format: MP4, AVI, MOV. Maks. 10MB ",-1))]),a(t).errors.file?(l(),s("div",re,c(a(t).errors.file),1)):d("",!0)])):d("",!0),r("div",ae,[y(a(T),{href:f.route("events.show",n.event.id),class:"px-4 py-2 text-gray-700 bg-gray-100 rounded hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},{default:S(()=>[...e[12]||(e[12]=[u(" Batal ",-1)])]),_:1},8,["href"]),r("button",{type:"submit",disabled:a(t).processing,class:"px-4 py-2 text-white rounded btn-primary disabled:opacity-50"},[a(t).processing?(l(),s("span",le,"Menyimpan...")):(l(),s("span",oe,"Simpan Perubahan"))],8,se)])],32)])])],64))}});export{pe as default};
