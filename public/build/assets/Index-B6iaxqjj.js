import{d as m,x as B,y as w,e as o,o as a,b as y,a as e,g as c,z as E,c as _,f as u,w as T,I as $,m as I,A as F,F as D,i as M,t as n,v as O,n as x,h as k,l as H}from"./app-Fb0LGyY_.js";import{_ as q,u as z}from"./AppLayout-D0XbQ-km.js";import{P as K,T as L,_ as Y}from"./ConfirmModal-C6RkZeQO.js";import{S as R,U as W,D as G,_ as J}from"./Pagination-B1qWbbua.js";import{E as Q}from"./EditIcon-D9Qdkj8G.js";import{_ as X}from"./Breadcrumb-CJPocqqf.js";import"./FlashMessage-CgKw3-1-.js";import"./useColors-BxdDnFDF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"flex flex-col gap-3 px-3 h-full"},ee={class:"flex justify-between items-center h-10"},te={class:"h-[90%] grid-cols-12 gap-4 md:gap-6 overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-600 dark:bg-white/[0.03]"},re={class:"flex flex-col gap-2 px-8 py-1 sm:flex-row sm:items-center sm:justify-between"},ae={class:"flex gap-3 items-center"},se=["value"],oe={class:"relative py-2"},de={class:"absolute left-4 top-1/2 -translate-y-1/2"},ne={class:"px-8 border-b border-gray-200 dark:border-gray-600"},le={class:"flex gap-4 -mb-px"},ie={key:0,class:"px-2 py-0.5 ml-2 text-xs text-primary bg-primary/10 rounded-full"},ce={key:0,class:"px-2 py-0.5 ml-2 text-xs text-yellow-600 bg-yellow-100 rounded-full dark:bg-yellow-900 dark:text-yellow-300"},ge={key:0,class:"px-2 py-0.5 ml-2 text-xs text-green-600 bg-green-100 rounded-full dark:bg-green-900 dark:text-green-300"},ue={key:0,class:"px-2 py-0.5 ml-2 text-xs text-red-600 bg-red-100 rounded-full dark:bg-red-900 dark:text-red-300"},ye={class:"overflow-auto","data-simplebar":""},xe={class:"min-w-full text-sm"},pe={class:"flex gap-2 justify-center items-center px-3"},be={class:"flex flex-col items-center"},me={key:0,class:"py-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},fe={class:"py-2.5 border border-gray-200 dark:border-gray-600"},ve={class:"flex justify-center items-center whitespace-nowrap"},ke={class:"px-3 text-gray-500 dark:text-gray-400"},he={class:"py-2.5 border border-gray-200 dark:border-gray-600"},we={class:"flex gap-3 items-center whitespace-nowrap ps-5"},_e={class:"flex flex-col leading-tight"},De={class:"font-medium text-gray-800 dark:text-white/90"},Se={class:"text-gray-500 dark:text-gray-400 text-xs"},Ce={class:"py-2.5 border border-gray-200 dark:border-gray-600"},je={class:"flex flex-col justify-center items-center px-3"},Be={class:"text-gray-500 dark:text-gray-400"},Te={class:"text-gray-400 dark:text-gray-500 text-xs"},$e={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Ie={class:"flex flex-col justify-center items-center px-3"},Me={class:"text-gray-500 dark:text-gray-400"},Ue={key:0,class:"text-gray-400 dark:text-gray-500 text-xs"},Ae={class:"py-2.5 border border-gray-200 dark:border-gray-600"},Ve={class:"flex justify-center items-center px-3 whitespace-nowrap"},Ne={key:0,class:"py-2.5 border border-gray-200 dark:border-gray-600"},Pe={class:"flex gap-3 justify-center px-4 whitespace-nowrap sm:px-0"},Ee=["onClick"],Fe={key:1},Oe=["colspan"],Qe=Object.assign({layout:q},{__name:"Index",props:{drivers:Object,companies:Array,search:String,status:String,company_id:String,statusCounts:Object,sortBy:String,sortDirection:String},setup(d){const l=d,{can:g}=z(),U=[{label:"Menu Utama"},{label:"Driver"}],s=m(l.status||"all"),p=m(l.company_id||""),f=i=>l.statusCounts&&l.statusCounts[i]||0;function S({sortBy:i=l.sortBy,sortDirection:t=l.sortDirection}={}){w.get(route("drivers.index"),{search:b.value,status:s.value,company_id:p.value,sortBy:i,sortDirection:t},{preserveScroll:!0,preserveState:!0,replace:!0})}const b=m(l.search||"");let C=null;B(b,()=>{clearTimeout(C),C=setTimeout(()=>{S()},400)}),B([s,p],()=>{new URL(window.location.href).searchParams.delete("page"),w.get(route("drivers.index"),{search:b.value,status:s.value,company_id:p.value,sortBy:l.sortBy,sortDirection:l.sortDirection},{preserveScroll:!0,preserveState:!0,replace:!0})});function A(i){let t="asc";l.sortBy===i&&l.sortDirection==="asc"&&(t="desc"),S({sortBy:i,sortDirection:t})}const v=m(null),h=m(!1),V=i=>{g("drivers.delete")&&(v.value=i,h.value=!0)},j=()=>{v.value=null,h.value=!1},N=()=>{g("drivers.delete")&&w.delete(route("drivers.destroy",v.value.id),{onSuccess:()=>{j()},preserveScroll:!0})};return(i,t)=>(a(),o(D,null,[y(c(E),{title:"Daftar Driver"}),e("div",Z,[e("div",ee,[y(X,{items:U}),c(g)("drivers.create")?(a(),_(c($),{key:0,href:i.route("drivers.create"),class:"flex gap-2 items-center px-3 py-2 text-white rounded btn-primary"},{default:T(()=>[y(K),t[7]||(t[7]=e("span",{class:"hidden text-sm md:block"},"Tambah Driver",-1))]),_:1},8,["href"])):u("",!0)]),e("div",te,[e("div",re,[t[9]||(t[9]=e("div",{class:"font-bold text-gray-700 md:text-xl dark:text-gray-300"}," Daftar Driver ",-1)),e("div",ae,[I(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>p.value=r),class:"px-3 h-10 text-sm text-gray-800 bg-transparent rounded-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90 focus:border-blue-300 focus:outline-hidden focus:ring-2 focus:ring-blue-500/20"},[t[8]||(t[8]=e("option",{value:""},"Semua Perusahaan",-1)),(a(!0),o(D,null,M(l.companies,r=>(a(),o("option",{key:r.id,value:r.id},n(r.name),9,se))),128))],512),[[F,p.value]]),e("div",oe,[e("div",de,[y(R,{class:"text-gray-400"})]),I(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>b.value=r),type:"text",placeholder:"Cari driver",class:"h-10 w-full rounded-lg border border-gray-200 bg-transparent py-2.5 pl-12 pr-4 text-sm text-gray-800 placeholder:text-gray-400 focus:border-blue-300 focus:outline-hidden focus:ring-3 focus:ring-blue-500/10 dark:border-gray-700 dark:bg-gray-800 dark:text-white/90 dark:placeholder:text-gray-400 dark:focus:border-blue-800 xl:w-[200px]"},null,512),[[O,b.value]])])])]),e("div",ne,[e("nav",le,[e("button",{onClick:t[2]||(t[2]=r=>s.value="all"),class:x(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",s.value==="all"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[t[10]||(t[10]=k(" Semua ",-1)),s.value==="all"?(a(),o("span",ie,n(f("all")),1)):u("",!0)],2),e("button",{onClick:t[3]||(t[3]=r=>s.value="pending"),class:x(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",s.value==="pending"?"border-yellow-500 text-yellow-600 dark:text-yellow-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[t[11]||(t[11]=k(" Menunggu Verifikasi ",-1)),s.value==="pending"?(a(),o("span",ce,n(f("pending")),1)):u("",!0)],2),e("button",{onClick:t[4]||(t[4]=r=>s.value="active"),class:x(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",s.value==="active"?"border-green-500 text-green-600 dark:text-green-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[t[12]||(t[12]=k(" Aktif ",-1)),s.value==="active"?(a(),o("span",ge,n(f("active")),1)):u("",!0)],2),e("button",{onClick:t[5]||(t[5]=r=>s.value="inactive"),class:x(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",s.value==="inactive"?"border-red-500 text-red-600 dark:text-red-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[t[13]||(t[13]=k(" Tidak Aktif ",-1)),s.value==="inactive"?(a(),o("span",ue,n(f("inactive")),1)):u("",!0)],2)])]),e("div",ye,[e("table",xe,[e("thead",null,[e("tr",null,[t[16]||(t[16]=e("th",{class:"py-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"flex flex-col items-center font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," No. ")])],-1)),e("th",{onClick:t[6]||(t[6]=r=>A("name")),class:"py-3 bg-gray-100 border border-gray-200 cursor-pointer dark:border-gray-600 dark:bg-gray-800"},[e("div",pe,[t[14]||(t[14]=e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Nama Driver ",-1)),e("div",be,[y(W,{class:x(["-mb-1",d.sortBy==="name"&&d.sortDirection==="asc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"]),y(G,{class:x(["-mt-1",d.sortBy==="name"&&d.sortDirection==="desc"?"text-gray-900 dark:text-gray-200":"text-gray-400 dark:text-gray-500"])},null,8,["class"])])])]),t[17]||(t[17]=e("th",{class:"py-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," User & Perusahaan ")])],-1)),t[18]||(t[18]=e("th",{class:"py-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Kontak ")])],-1)),t[19]||(t[19]=e("th",{class:"py-3 bg-gray-100 border border-gray-200 dark:border-gray-600 dark:bg-gray-800"},[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Status ")])],-1)),c(g)("drivers.edit")||c(g)("drivers.delete")?(a(),o("th",me,[...t[15]||(t[15]=[e("div",{class:"flex justify-center items-center"},[e("p",{class:"font-medium text-gray-500 whitespace-nowrap dark:text-gray-400"}," Aksi ")],-1)])])):u("",!0)])]),e("tbody",null,[d.drivers.data&&d.drivers.data.length>0?(a(!0),o(D,{key:0},M(d.drivers.data,(r,P)=>(a(),o("tr",{key:r.id,class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800"},[e("td",fe,[e("div",ve,[e("p",ke,n((d.drivers.current_page-1)*d.drivers.per_page+P+1)+". ",1)])]),e("td",he,[e("div",we,[e("div",_e,[e("p",De,n(r.name),1),e("span",Se," KTP: "+n(r.no_ktp),1)])])]),e("td",Ce,[e("div",je,[e("p",Be,n(r.user?.name||"-"),1),e("p",Te,n(r.company?.name||"-"),1)])]),e("td",$e,[e("div",Ie,[e("p",Me,n(r.no_hp),1),r.no_sim?(a(),o("p",Ue," SIM: "+n(r.no_sim),1)):u("",!0)])]),e("td",Ae,[e("div",Ve,[e("span",{class:x(["px-3 py-1 rounded-full text-xs font-medium",r.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":r.status==="pending"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"])},n(r.status==="active"?"Aktif":r.status==="pending"?"Menunggu Verifikasi":"Tidak Aktif"),3)])]),c(g)("drivers.edit")||c(g)("drivers.delete")?(a(),o("td",Ne,[e("div",Pe,[c(g)("drivers.edit")?(a(),_(c($),{key:0,href:i.route("drivers.edit",r.id),class:"text-yellow-500 hover:text-yellow-600",title:"Edit"},{default:T(()=>[y(Q)]),_:1},8,["href"])):u("",!0),c(g)("drivers.delete")?(a(),o("button",{key:1,onClick:H(He=>V(r),["stop"]),class:"text-red-500 hover:text-red-600",title:"Hapus"},[y(L)],8,Ee)):u("",!0)])])):u("",!0)]))),128)):(a(),o("tr",Fe,[e("td",{colspan:c(g)("drivers.edit")||c(g)("drivers.delete")?6:5,class:"py-6 font-medium text-center text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-gray-600"}," Tidak ada driver ditemukan ",8,Oe)]))])]),y(Y,{show:h.value,question:"Yakin ingin menghapus",selected:`${v.value?.name}`,title:"Hapus Driver",confirmText:"Ya, Hapus!",maxWidth:"md",onClose:j,onConfirm:N},null,8,["show","selected"])]),d.drivers.data&&d.drivers.data.length>0?(a(),_(J,{key:0,pagination:d.drivers},null,8,["pagination"])):u("",!0)])])],64))}});export{Qe as default};
